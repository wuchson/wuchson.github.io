<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>ä¹æ—å…¨æ™¯ç™¾ç§‘ï¼šè¨ˆç®—æ©Ÿèˆ‡å±¤ç–Šåœ–</title>
    <style>
        :root { --gold: #b8860b; --wood: #3e2723; --paper: #fdfaf0; --male: #3498db; --female: #e91e63; --tree-line: #bdc3c7; }
        body { font-family: "Noto Sans TC", sans-serif; background: #f4f4f4; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: auto; }

        /* è¨ˆç®—æ©Ÿæ¨£å¼ */
        .calc-box { background: var(--paper); border-radius: 12px; border: 3px double var(--gold); box-shadow: 0 10px 25px rgba(0,0,0,0.1); overflow: hidden; margin-bottom: 40px; }
        .gender-selector { display: flex; background: #ddd; }
        .gender-btn { flex: 1; border: none; padding: 12px; cursor: pointer; font-weight: bold; }
        .gender-btn.active.male { background: var(--male); color: white; }
        .gender-btn.active.female { background: var(--female); color: white; }
        .screen { background: var(--wood); color: #fff; padding: 20px; text-align: right; }
        .path { font-size: 0.85em; opacity: 0.7; min-height: 1.2em; }
        .ans { font-size: 1.8em; font-weight: bold; color: #f1c40f; margin-top: 5px; }
        .btn-group { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1px; background: var(--gold); }
        button.key { border: none; padding: 15px; font-size: 1.1em; background: #fff; cursor: pointer; }
        button.key:hover { background: #fffde7; }
        .ac-btn { background: #c0392b !important; color: white; }

        /* å±¤ç–Šåœ–æ¨£å¼ */
        .tree-box { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .tree-box h3 { border-left: 5px solid var(--gold); padding-left: 10px; color: var(--wood); }
        ul { list-style: none; padding-left: 25px; border-left: 1px solid var(--tree-line); }
        li { margin: 10px 0; position: relative; }
        li::before { content: ""; position: absolute; left: -25px; top: 12px; width: 20px; border-top: 1px solid var(--tree-line); }
        .node-tag { background: #f9f9f9; padding: 4px 10px; border-radius: 4px; border: 1px solid #eee; font-size: 0.95em; }
        .highlight { color: var(--gold); font-weight: bold; }
        .self-node { background: #e74c3c; color: white; border: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="calc-box">
        <div class="gender-selector">
            <button id="mBtn" class="gender-btn male active" onclick="setGender('male')">æˆ‘æ˜¯ç”·æ€§</button>
            <button id="fBtn" class="gender-btn female" onclick="setGender('female')">æˆ‘æ˜¯å¥³æ€§</button>
        </div>
        <div class="screen">
            <div id="pathText" class="path">æˆ‘çš„...</div>
            <div id="ansText" class="ans">è‡ªå·±</div>
        </div>
        <div class="btn-group">
            <button class="key" onclick="add('çˆ¶')">çˆ¶</button>
            <button class="key" onclick="add('æ¯')">æ¯</button>
            <button class="key" onclick="back()">é€€æ ¼</button>
            <button class="key ac-btn" onclick="reset()">AC</button>
            <button class="key" onclick="add('å…„')">å…„</button>
            <button class="key" onclick="add('å¼Ÿ')">å¼Ÿ</button>
            <button class="key" onclick="add('å§')">å§</button>
            <button class="key" onclick="add('å¦¹')">å¦¹</button>
            <button class="key" onclick="add('å¤«')">å¤«</button>
            <button class="key" onclick="add('å¦»')">å¦»</button>
            <button class="key" onclick="add('å­')">å­</button>
            <button class="key" onclick="add('å¥³')">å¥³</button>
        </div>
    </div>

    <div class="tree-box">
        <h3>ğŸŒ³ ä¹æ—äº”ä»£å±¤ç–Šå°ç…§è¡¨</h3>
        
        <ul>
            <li><span class="node-tag"><b>å¤©ç¥–è¼©</b>ï¼šå¤©ç¥–çˆ¶æ¯</span>
                <ul>
                    <li><span class="node-tag"><b>é«˜ç¥–è¼©</b>ï¼šé«˜ç¥–çˆ¶æ¯</span>
                        <ul>
                            <li><span class="node-tag"><b>æ›¾ç¥–è¼©</b>ï¼šæ›¾ç¥–çˆ¶æ¯ (å¤ªå…¬/å¤ªå©†)</span>
                                <ul>
                                    <li><span class="node-tag"><b>ç¥–è¼©</b>ï¼šç¥–çˆ¶æ¯ / å¤–ç¥–çˆ¶æ¯</span>
                                        <ul>
                                            <li><span class="node-tag"><b>çˆ¶è¼©</b>ï¼šçˆ¶è¦ª / æ¯è¦ª</span>
                                                <ul>
                                                    <li><span class="node-tag self-node"><b>å·±èº«</b>ï¼šæˆ‘</span>
                                                        <ul>
                                                            <li><span class="node-tag"><b>å­è¼©</b>ï¼šå…’å­ / å¥³å…’</span>
                                                                <ul>
                                                                    <li><span class="node-tag"><b>å­«è¼©</b>ï¼šå­«å­ / å­«å¥³</span>
                                                                        <ul>
                                                                            <li><span class="node-tag"><b>æ›¾å­«è¼©</b>ï¼šæ›¾å­« / æ›¾å­«å¥³</span>
                                                                                <ul>
                                                                                    <li><span class="node-tag"><b>ç„å­«è¼©</b>ï¼šç„å­« / ç„å­«å¥³</span>
                                                                                        <ul>
                                                                                            <li><span class="node-tag"><b>ä¾†å­«è¼©</b>ï¼šä¾†å­« / ä¾†å­«å¥³</span></li>
                                                                                        </ul>
                                                                                    </li>
                                                                                </ul>
                                                                            </li>
                                                                        </ul>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</div>

<script>
    let myGender = 'male';
    let stack = [];
    const dict = {
        "çˆ¶": "çˆ¶è¦ª", "æ¯": "æ¯è¦ª", "çˆ¶,çˆ¶": "çˆºçˆº", "æ¯,æ¯": "å¤–å©†",
        "çˆ¶,çˆ¶,çˆ¶": "æ›¾ç¥–çˆ¶", "çˆ¶,çˆ¶,çˆ¶,çˆ¶": "é«˜ç¥–çˆ¶", "çˆ¶,çˆ¶,çˆ¶,çˆ¶,çˆ¶": "å¤©ç¥–çˆ¶",
        "å­,å­": "å­«å­", "å­,å­,å­": "æ›¾å­«", "å­,å­,å­,å­": "ç„å­«", "å­,å­,å­,å­,å­": "ä¾†å­«",
        "male_å¦»,çˆ¶": "å²³çˆ¶", "female_å¤«,çˆ¶": "å…¬å…¬",
        "çˆ¶,å…„": "ä¼¯çˆ¶", "çˆ¶,å¼Ÿ": "å”çˆ¶", "æ¯,å…„": "èˆ…çˆ¶", "æ¯,å§": "å§¨æ¯"
    };

    function setGender(g) {
        myGender = g;
        document.getElementById('mBtn').classList.toggle('active', g === 'male');
        document.getElementById('fBtn').classList.toggle('active', g === 'female');
        render();
    }
    function add(r) { if(stack.length < 8) stack.push(r); render(); }
    function reset() { stack = []; render(); }
    function back() { stack.pop(); render(); }
    function render() {
        const p = document.getElementById('pathText');
        const a = document.getElementById('ansText');
        if (stack.length === 0) { p.innerText = "æˆ‘çš„..."; a.innerText = "è‡ªå·±"; return; }
        const key = stack.join(',');
        const gKey = myGender + "_" + key;
        p.innerText = "è·¯å¾‘: " + stack.join(' çš„ ');
        a.innerText = dict[gKey] || dict[key] || "é è¦ªé•·è¼©";
    }
</script>

</body>
</html>
